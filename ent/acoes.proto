// Tudo relacionado as acoes que os jogadores podem realizar.
import "ent/entidade.proto";

package ent;

enum TipoAcao {
  ACAO_PROJETIL = 1;
  ACAO_DISPERSAO = 2;
  ACAO_RAIO = 3;
  ACAO_SINALIZACAO = 4;
  ACAO_DELTA_PONTOS_VIDA = 5;
}

enum GeometriaAcao {
  ACAO_GEO_ESFERA = 1;
  ACAO_GEO_CUBO = 2;
}

enum TipoAceleracao {
  ACAO_ACEL_ZERO = 1;  // Nao muda velocidade.
  ACAO_ACEL_CONSTANTE = 2;  // Acelera constantemente.
  ACAO_ACEL_QUADRATICA = 3;  // Acelera quadraticamente.
}

// A escala nos tres eixos.
message Escala {
  optional float x = 1 [default=1.0];
  optional float y = 2 [default=1.0];
  optional float z = 3 [default=1.0];
}

message Translacao {
  optional float x = 1 [default=0];
  optional float y = 2 [default=0];
  optional float z = 3 [default=0];
}

message Velocidade {
  // Em m / 10ms.
  optional float inicial = 1;
  optional TipoAceleracao tipo_aceleracao = 2 [default=ACAO_ACEL_ZERO];
  // O delta a cada atualizacao ao qual sera aplicado a aceleracao. Em unidades / 10ms.
  optional float delta_velocidade = 3;
}

message AcaoProto {
  // Identificador da acao.
  optional string id = 1;
  optional TipoAcao tipo = 2;
  optional int32 raio_area = 3;  // quadrados.
  // Aplicada antes da escala.
  optional Translacao translacao = 17; 
  optional Escala escala = 18;
  optional Cor cor = 4;
  // Adicionar coisas da acao aqui.
  optional uint32 id_entidade_origem = 10;
  optional uint32 id_entidade_destino = 11;
  // Posicao do clique no tabuleiro, para quem usar.
  optional Posicao pos_quadrado = 12;
  optional Posicao pos_tabuleiro = 13;
  // Para acao afetando pontos de vida.
  optional int32 delta_pontos_vida = 14;  // cosmetico apenas.
  optional bool afeta_pontos_vida = 15 [default=false];  // Se verdadeiro, a entidade sofre o dano de verdade.
  // O tipo de objeto para algumas acoes especificas.
  optional GeometriaAcao geometria = 16;
  optional Velocidade velocidade = 19;
  optional uint32 duracao = 20;  // Duracao * 10ms.
}

// O arquivo de acoes Ã© serializado desta forma.
message Acoes {
  repeated AcaoProto acao = 1;
}
